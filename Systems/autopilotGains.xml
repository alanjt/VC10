<?xml version="1.0"?>

<!--
    Autopilot Configuration for the VC10.
-->


<PropertyList>
	<!--
    ===============
    1/V
    ===============
    -->
	<filter>
<!--		<name>OneOverV</name> -->
		<debug>false</debug>
		<type>gain</type>
		<gain>1</gain>
		<input>
			<expression><div>
					<value>1</value>
					<property>fdm/jsbsim/velocities/vt-fps</property>
				</div></expression>
		</input>

		<output>
			<property>autopilot/internal/OneOverV</property>
		</output>
		<u_min>0.0</u_min>
		<u_max>0.01</u_max>
	</filter>
	<!--
    ===============
    Speed of Sound IAS Kts
    ===============
    -->
	<filter>
<!--		<name>Mach 1 IAS</name> -->
		<debug>false</debug>
		<type>gain</type>
		<gain>1</gain>
		<enable>
			<condition>
				<not-equals>
					<property>fdm/jsbsim/velocities/mach</property>
					<value>0.0</value>
				</not-equals>
			</condition>
		</enable>
		<input>
			<expression><div>
					<property>fdm/jsbsim/velocities/vc-kts</property>
					<property>fdm/jsbsim/velocities/mach</property>
				</div></expression>
		</input>
		<output><property>autopilot/internal/Mach1Kts</property></output>
	</filter>

	<!--
    ===============
    Gain Schedulers and limits
    ===============
    -->


	<!-- limits -->
	<filter>
<!--		<name>Phi_r_limit</name> -->
		<debug>false</debug>
		<type>gain</type>
		<gain>1</gain>
		<input>
			<condition><property>autopilot/switches/ILS-LOC</property></condition>
			<value>30.0</value>
		</input>
		<input><!-- default for other modes -->
			<value>30.0</value>
		</input>
		<output><property>autopilot/LGUIDE/Phi_r_limit</property></output>
	</filter>

	<filter>
<!--		<name>Phi_r_neglimit</name> -->
		<debug>false</debug>
		<type>gain</type>
		<gain>-1</gain>
		<input>
			<property>autopilot/LGUIDE/Phi_r_limit</property>
		</input>
		<output><property>autopilot/LGUIDE/Phi_r_neglimit</property></output>
	</filter>

	<filter>
<!--		<name>Roll driver limit</name> -->
		<debug>false</debug>
		<type>gain</type>
		<input>
			<value>23.25</value>
		</input>
		<output><property>autopilot/LGUIDE/roll_driver_limit</property></output>
	</filter>

	<filter>
<!--		<name>Roll driver negative limit</name> -->
		<debug>false</debug>
		<type>gain</type>
		<gain><value>-1.0</value></gain>
		<input>
			<property>autopilot/LGUIDE/roll_driver_limit</property>
		</input>
		<output><property>autopilot/LGUIDE/roll_driver_neg_limit</property></output>
	</filter>
	


	<!-- gains -->



	<filter>
<!--		<name>Gbetadot altitude limiter</name> -->
		<debug>false</debug>
		<type>gain</type>
		<gain>1.0</gain>
		<input><property>instrumentation/altimeter/indicated-altitude-ft</property></input>
		<output><property>autopilot/limit/altitude-ft-lim</property></output>
		<u_min>9000.0</u_min>
		<u_max>60000.0</u_max>
	</filter>


	<filter>
<!--		<name>Localiser error gain</name> -->
		<debug>false</debug>
		<type>gain</type>
		<gain>1.0</gain>
		<input>
			<expression>
				<table>
					<property>instrumentation/altimeter/indicated-altitude-ft</property>
					<entry><ind>0.0</ind><dep>-2.0</dep></entry>
					<entry><ind>2000</ind><dep>-5.0</dep></entry>
				</table>
			</expression>
		</input>
		<output><property>autopilot/gain/Kloc_Loc</property></output>
	</filter>

	<filter>
<!--		<name>Localiser bank command due to heading error error gain</name> -->
		<debug>false</debug>
		<type>gain</type>
		<gain>1.0</gain>
		<input>
			<expression>
				<product>
					<property>velocities/uBody-fps</property>
					<value>0.007</value>
				</product>
			</expression>
		</input>
		<output><property>autopilot/LGUIDE/KPSI</property></output>
	</filter>

	<filter>
<!--		<name>Localiser bank feedback gain</name> -->
		<debug>false</debug>
		<type>gain</type>
		<gain>1.0</gain>
		<input><value>0.0</value></input>
		<output><property>autopilot/gain/Kloc_Phi</property></output>
	</filter>

</PropertyList>
