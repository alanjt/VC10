<?xml version="1.0"?>
<!--
    Autopilot Configuration for the VC10.
-->
<PropertyList>
	<!--
    ============================================================
   Pitch Modes - Pitch Hold, IAS Hold, Mach Hold, Alt Hold, G/S
    ============================================================
-->
	<!--
    =====================
    Primary Attitude Data
    =====================
    -->
	<!-- pitch angle feedback gain -->
	<filter>
		<name>Gtheta</name>
		<debug>false</debug>
		<type>gain</type>
		<input>
			<expression>
				<product>
					<value>3.0</value>
					<sum>
						<value>1.17</value>
						<product>
							<value>-0.00268</value><property>fdm/jsbsim/aero/qbar-psf</property>
						</product>
					</sum>
				</product>
			</expression>
		</input>
		<!--	<u_min>0.1</u_min>
		<u_max>1.0</u_max> -->
		<output><property>autopilot/PitchStab/Gtheta</property></output>
	</filter>
	
	<!-- pitch rate feedback gain -->
	<filter>
		<name>Gq</name>
		<debug>false</debug>
		<type>gain</type>
		<input>
			<expression>
				<product>
					<value>1.0</value>
					<sum>
						<value>1.096</value>
						<product>
							<value>-0.00144</value>
							<property>fdm/jsbsim/aero/qbar-psf</property>
						</product>
					</sum>
				</product>
			</expression>
		</input>
		<!--	<u_min>0.1</u_min>
		<u_max>1.0</u_max> -->
		<output><property>autopilot/PitchStab/Gq</property></output>
	</filter>
	
	<filter>
		<name>Pitch Error</name>
		<debug>false</debug>
		<type>gain</type>
		<gain>1.0</gain>
		<input>
		
			<condition><property>autopilot/logic/PITCH-HOLD</property></condition>
			<expression>
				<dif>
					<property>fdm/jsbsim/attitude/theta-deg</property>
					<sum>
						<property>autopilot/PitchHold/THECOM</property>
						<property>autopilot/PitchHold/thetaRef_deg</property>
					</sum>
				</dif>
			</expression>
		</input>
		
		<input>
			<condition><property>autopilot/logic/ALT-sw</property></condition>
			<expression>
				<dif>
					<property>fdm/jsbsim/attitude/theta-deg</property>
					<sum>
						<property>autopilot/AltHold/THECOM</property>
						<property>autopilot/AltHold/thetaRef_deg</property>
					</sum>
				</dif>
			</expression>
		</input>
		
		<input>
			<condition><property>autopilot/logic/IAS-sw</property></condition>
			<expression>
				<dif>
					<property>fdm/jsbsim/attitude/theta-deg</property>
					<sum>
						<property>autopilot/IASHold/THECOM</property>
						<property>autopilot/IASHold/thetaRef_deg</property>
					</sum>
				</dif>
			</expression>
		</input>
		
		<input>
			<condition><property>autopilot/logic/MACH-sw</property></condition>
			<expression>
				<dif>
					<property>fdm/jsbsim/attitude/theta-deg</property>
					<sum>
						<property>autopilot/MachHold/THECOM</property>
						<property>autopilot/MachHold/thetaRef_deg</property>
					</sum>
				</dif>
			</expression>
		</input>		
		<output>
			<property>autopilot/PitchStab/thetaErr_deg</property>
		</output>
		<u_min>-20</u_min>
		<u_max>20</u_max>
	</filter>
	
	<filter>
		<type>high-pass</type><!-- The high-pass filter is also known as a 1st order wash-out filter -->
		<debug>false</debug>
		<enable>
			<condition>
				<property>autopilot/logic/AP1orAP2-sw</property>
			</condition>
		</enable>
		<filter-time>4.0</filter-time>
		<input>
			<expression>
				<product>
					<property>fdm/jsbsim/velocities/q-aero-rad_sec</property>
					<value>57.295779513082320876798154814105</value>
					<property>autopilot/PitchStab/Gq</property>
				</product>
			</expression>
		</input>
		<output><property>autopilot/PitchStab/QBW</property></output>
	</filter>
		
	<filter>
		<name>Pitch Inner Loop</name>
		<debug>false</debug>
		<type>gain</type>
		<gain>1.0</gain>
		<input>
			<expression>
				<sum>
					<product>
						<property>autopilot/PitchStab/Gtheta</property>
						<property>autopilot/PitchStab/thetaErr_deg</property>
					</product>
					<property>autopilot/PitchStab/QBW</property>
				</sum>
			</expression>
		</input>
		<output>autopilot/commands/APelevator-deg</output>
		<u_min>-20</u_min>
		<u_max>20</u_max>
	</filter>
	
	<filter>
		<name>Pitch elevator Sum</name>
		<debug>false</debug>
		<type>gain</type>
		<gain>1.0</gain>
		<input>
			<condition>
				<property>autopilot/logic/AP1orAP2-sw</property>
			</condition>
			<property>autopilot/commands/APelevator-deg</property>
		</input>
		<output>
			<property>autopilot/commands/afcs-elevator-deg</property>
		</output>
	</filter>
</PropertyList>
